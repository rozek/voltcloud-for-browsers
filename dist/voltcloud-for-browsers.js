!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.VoltCloud,r=e.VoltCloud={};t(r),r.noConflict=function(){return e.VoltCloud=n,r}}())}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function r(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function a(e){return"string"==typeof e||e instanceof String}var o=/^\s*$/;function s(e){return("string"==typeof e||e instanceof String)&&!o.test(e.valueOf())}function i(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}var u=Array.isArray,c=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function l(e){return function(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}(e,c)}var d=!1,p=!0;function h(e,t,n){var a=function(a,o){return function(e,t,n,a,o){if(null==t){if(a)return t;r("MissingArgument: no "+b(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else r("InvalidArgument: the given "+b(e)+" is no valid "+b(o))}(a,o,e,t,n)},o=e.name;return null!=o&&/^ValueIs/.test(o)?function(e,t){null==e&&r("MissingArgument: no function given");"function"!=typeof e&&r("InvalidArgument: the given 1st Argument is not a JavaScript function");null==t&&r("MissingArgument: no desired name given");"string"==typeof t||t instanceof String||r("InvalidArgument: the given desired name is not a string");if(e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}(a,o.replace(/^ValueIs/,t?"allow":"expect")):a}var v=h(s,p,"non-empty literal string"),f=h(s,d,"non-empty literal string"),g=h(i,d,'"plain" JavaScript object'),m=h(l,p,"valid EMail address"),w=h(l,d,"valid EMail address");function b(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function y(e,t){return void 0===t&&(t='"'),t+function(e,t){return void 0===t&&(t='"'),e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}(e,t)+t}var C,T,A,_,S,x,k,P,V,I,E,z=/^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$/,q=1048574,N="RpYCMN";function O(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return re(),[4,le("private","GET","{{dashboard_url}}/api/app")];case 1:return[2,e.sent()||[]]}}))}))}function H(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:re(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{dashboard_url}}/api/app/{{application_id}}/users")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2,e||[]]}}))}))}function R(e){return a(e)&&e.length>=8&&/[0-9]/.test(e)&&e.toLowerCase()!==e}var L=h(R,p,"valid VoltCloud password"),U=L,M=h(R,d,"valid VoltCloud password"),F=M;function j(e){return a(e)&&e.length>=1&&e.length<=63&&z.test(e)}var Z=h(j,p,"valid VoltCloud application name"),$=Z,G=h(j,d,"valid VoltCloud application name"),K=G;function B(e){return s(e)&&e.length<=255}var D=h(B,p,"suitable VoltCloud storage key"),J=D,W=h(B,d,"suitable VoltCloud storage key"),X=W;function Y(e){return s(e)&&e.length<=q}var Q=h(Y,p,"suitable VoltCloud storage value"),ee=Q,te=h(Y,d,"suitable VoltCloud storage value"),ne=te;function re(){null==C&&r("InvalidState: please mandate a specific VoltCloud developer first")}function ae(){null==_&&r("InvalidState: please mandate a specific VoltCloud customer first")}function oe(){null==C&&null==_&&r("InvalidState: please mandate a specific VoltCloud developer or customer first")}function se(){null==V&&r("InvalidState: please focus on a specific VoltCloud application first")}function ie(){null==I&&r("InvalidState: please focus on a specific VoltCloud application customer first")}function ue(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:C=void 0,T=void 0,A=void 0,_=void 0,S=void 0,x=void 0,k=void 0,I=void 0,E=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),T=e,A=o,[4,le("public","POST","{{dashboard_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:N},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: developer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(C=t.user_id,k=t.access_token):(T=void 0,A=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function ce(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:_=void 0,S=void 0,x=void 0,C=void 0,T=void 0,A=void 0,k=void 0,I=void 0,E=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),S=e,x=o,[4,le("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:P},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: customer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(_=t.user_id,k=t.access_token,I=t.user_id,E=e):(S=void 0,x=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function le(e,a,o,i,c,l){return void 0===l&&(l=!0),t(this,void 0,void 0,(function(){var t,d;return n(this,(function(n){var p;return t=Object.assign({},{dashboard_id:N,dashboard_url:"https://dashboard.voltcloud.io",application_id:P,application_url:V,customer_id:I},i||{}),p=t,d=o.replace(de,(function(e,t){if(p.hasOwnProperty(t))return p[t];r("VariableNotFound: the given placeholder text refers to an undefined variable called "+y(t))})),"GET"===a&&(d+=(d.indexOf("?")<0?"?":"&")+"_="+Date.now()),[2,new Promise((function(t,n){var r=new XMLHttpRequest;if(r.open(a,d,!0),"private"===e&&(r.withCredentials=!0,r.setRequestHeader("authorization","Bearer "+k)),r.timeout=3e4,r.addEventListener("timeout",(function(){n(pe("RequestTimedout: VoltCloud request timed out"))})),r.addEventListener("abort",(function(){n(pe("RequestAborted: VoltCloud request has been aborted"))})),r.addEventListener("error",(function(){if(401===r.status)return l?(null!=T?ue(T,A,!1):ce(S,x,!1)).then((function(){le(e,a,o,i,c,!1).then((function(e){return t(e)})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)})):n(pe("AuthorizationFailure: VoltCloud request could not be authorized"));if((r.getResponseHeader("content-type")||"").startsWith("application/json"))try{var d=JSON.parse(r.responseText);if(s(d.type)&&s(d.message))return 422===r.status&&"ValidationError"===d.type&&null!=d.validations?n(function(e){function t(e){return pe(e,{HTTPStatus:422})}if(u(e.validations.body)&&null!=e.validations.body[0]){var n=e.validations.body[0].messages[0];switch(!0){case n.contains("email"):switch(e.validations.body[0].property){case"request.body.username":case"request.body.email":return t("InvalidArgument: invalid EMail address given")}break;case n.contains("^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: invalid application name given")}break;case n.contains("does not meet minimum length of 1"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("MissingArgument: no application name given");case"request.body.confirmation_url":return t("MissingArgument: no Customer Confirmation URL given");case"request.body.reset_url":return t("MissingArgument: no Password Reset URL given")}break;case n.contains("does not meet maximum length of 63"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: the given application name is too long");case"request.body.confirmation_url":return t("InvalidArgument: the given Customer Confirmation URL is too long");case"request.body.reset_url":return t("InvalidArgument: the given Password Reset URL is too long")}break;case n.contains("additionalProperty"):return t("InvalidArgument: unsupported property given");case n.contains('does not match pattern "[a-zA-Z0-9]{6,}"'):return t("InvalidArgument: invalid Application Id given")}}if(u(e.validations.password)&&null!=e.validations.password[0])return t("InvalidArgument: "+e.validations.password[0]);return pe("InternalError: "+e.message,e)}(d)):n(pe(d.type+": "+d.message,{HTTPStatus:r.status,HTTPResponse:r.responseText}))}catch(e){}return n(pe("RequestFailed: VoltCloud request failed",{HTTPStatus:r.status,HTTPResponse:r.responseText}))})),r.addEventListener("load",(function(){var e=r.status,a=r.getResponseHeader("content-type")||"";if(204===e)return t(void 0);switch(!0){case a.startsWith("application/json"):return t(JSON.parse(r.responseText));case 201===e:return t(void 0);default:return n(pe("RequestFailed: unexpected response content type "+y(a||"(missing)"),{ContentType:a,HTTPResponse:r.responseText}))}})),null==c)r.send(null);else if(c instanceof Blob){var p=new FormData;p.append("index.zip",c),r.send(p)}else r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(c))}))]}))}))}var de=/\{\{([a-z0-9_-]+)\}\}/gi;function pe(e,t){var n,r=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);return null==r?n=new Error(e):(n=new Error(r[2])).name=r[1],null!=t&&Object.assign(n,t),n}e.ApplicationIdPattern=/^[a-zA-Z0-9]{6,}$/,e.ApplicationNamePattern=z,e.ApplicationRecords=O,e.ApplicationStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:oe(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{application_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.ApplicationStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud application storage key",e),oe(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchApplication: could not find the given application or storage key");case"App not found.":r("NoSuchApplication: could not find the given application");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.CustomerRecord=function(e){return t(this,void 0,void 0,(function(){var t,a,o,s,i,u;return n(this,(function(n){switch(n.label){case 0:return v("VoltCloud customer id",e),se(),null==e&&(ie(),e=I),null!=_?[3,2]:(re(),[4,H()]);case 1:for(a=n.sent(),o=0,s=a.length;o<s;o++)if((i=a[o]).id=e){t=i;break}return[3,6];case 2:ae(),n.label=3;case 3:return n.trys.push([3,5,,6]),[4,le("private","GET","{{application_url}}/api/user/{{customer_id}}",{customer_id:e})];case 4:return t=n.sent(),[3,6];case 5:switch((u=n.sent()).HTTPStatus){case 422:switch(u.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw u}return[3,6];case 6:return null!=t&&t.id===e?(E=t.email,I===_&&(S=t.email),[2,t]):(r("InternalError: could not analyze response for registration request"),[2])}}))}))},e.CustomerRecords=H,e.CustomerStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{customer_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.CustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud customer storage key",e),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchCustomer: could not find the given customer or storage key");case"User not found.":r("NoSuchCustomer: could not find the given customer");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.ValueIsApplicationName=j,e.ValueIsPassword=R,e.ValueIsStorageKey=B,e.ValueIsStorageValue=Y,e.actOnBehalfOfCustomer=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return w("VoltCloud customer email address",e),M("VoltCloud customer password",r),se(),[4,ce(e,r)];case 1:return t.sent(),[2]}}))}))},e.actOnBehalfOfDeveloper=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return w("VoltCloud developer email address",e),M("VoltCloud developer password",r),[4,ue(e,r)];case 1:return t.sent(),[2]}}))}))},e.allowApplicationName=Z,e.allowPassword=L,e.allowStorageKey=D,e.allowStorageValue=Q,e.allowedApplicationName=$,e.allowedPassword=U,e.allowedStorageKey=J,e.allowedStorageValue=ee,e.changeCustomerEMailAddressTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer email address",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{email:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?(E=t.email,I===_&&(S=t.email)):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.changeCustomerPasswordTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:M("VoltCloud customer password",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{password:{old:x,new:e,confirmation:e}})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?I===_&&(x=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.clearApplicationStorage=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:re(),se(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,le("private","DELETE","{{dashboard_url}}/api/storage/{{application_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.clearCustomerStorage=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:oe(),se(),ie(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,le("private","DELETE",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.confirmCustomerUsing=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:f("VoltCloud customer confirmation token",e),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/confirm",null,{token:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.deleteApplicationStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud application storage key",e),re(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","DELETE","{{dashboard_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":r("NoSuchApplication: could not find the given application or storage key");case"App not found.":r("NoSuchApplication: could not find the given application");case"Key does not exist.":return[2]}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.deleteCustomer=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:oe(),se(),ie(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,le("private","DELETE",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/user/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"User not found.":return[2]}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid user id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.deleteCustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud customer storage key",e),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","DELETE",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.expectApplicationName=G,e.expectPassword=M,e.expectStorageKey=W,e.expectStorageValue=te,e.expectedApplicationName=K,e.expectedPassword=F,e.expectedStorageKey=X,e.expectedStorageValue=ne,e.focusOnApplication=function(e){return t(this,void 0,void 0,(function(){var t,a,o,s;return n(this,(function(n){switch(n.label){case 0:return null==C?[3,2]:(f("VoltCloud application id",e),P=void 0,V=void 0,[4,O()]);case 1:for(t=n.sent(),a=0,o=t.length;a<o;a++)if((s=t[a]).id===e)return P=e,V=s.url,[2];return r("NoSuchApplication: no application with id "+y(e)+" found for the currently focused developer"),[3,3];case 2:P=void 0,V=e,n.label=3;case 3:return[2]}}))}))},e.focusOnApplicationCalled=function(e){return t(this,void 0,void 0,(function(){var t,a,o,s;return n(this,(function(n){switch(n.label){case 0:return G("VoltCloud application name",e),P=void 0,V=void 0,[4,O()];case 1:for(t=n.sent(),a=0,o=t.length;a<o;a++)if((s=t[a]).subdomain===e)return P=s.id,V=s.url,[2];return r("NoSuchApplication: no application called "+y(e)+" found for the currently focused developer"),[2]}}))}))},e.focusOnCustomer=function(e){return t(this,void 0,void 0,(function(){var t,a,o,s;return n(this,(function(n){switch(n.label){case 0:return f("VoltCloud customer id",e),re(),se(),I=void 0,E=void 0,[4,H()];case 1:for(t=n.sent(),a=0,o=t.length;a<o;a++)if((s=t[a]).id===e)return I=e,E=s.email,[2];return r("NoSuchCustomer: no customer with id "+y(e)+" found for the currently focused application"),[2]}}))}))},e.focusOnCustomerWithAddress=function(e){return t(this,void 0,void 0,(function(){var t,a,o,s;return n(this,(function(n){switch(n.label){case 0:return w("VoltCloud customer email address",e),re(),se(),I=void 0,E=void 0,[4,H()];case 1:for(t=n.sent(),a=0,o=t.length;a<o;a++)if((s=t[a]).email===e)return I=s.id,E=e,[2];return r("NoSuchCustomer: no customer with email address "+y(e)+" found for the currently focused application"),[2]}}))}))},e.focusOnNewApplication=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return re(),P=void 0,V=void 0,[4,le("private","POST","{{dashboard_url}}/api/app",null,{})];case 1:return e=t.sent(),P=e.id,V=e.url,[2]}}))}))},e.focusOnNewCustomer=function(e,o){return t(this,void 0,void 0,(function(){var t,s;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer email address",e),M("VoltCloud customer password",o),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/register",null,{email:e,password:o,confirmation:o,scope:P})];case 2:return t=n.sent(),[3,4];case 3:switch((s=n.sent()).HTTPStatus){case 404:switch(s.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(s.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw s}return[3,4];case 4:return null!=t&&a(t.id)?(I=t.id,E=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.maxApplicationNameLength=63,e.maxEMailAddressLength=255,e.maxNamePartLength=255,e.maxStorageKeyLength=255,e.maxStorageValueLength=q,e.resendConfirmationEMailToCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer email address",e),se(),null==e&&(ie(),e=E),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/resend",null,{email:e,scope:P})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.resetCustomerPasswordUsing=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:f("VoltCloud password reset token",e),M("VoltCloud customer password",a),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/reset",null,{token:e,password:a,confirmation:a})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.setApplicationStorageEntryTo=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud application storage key",e),te("VoltCloud application storage value",a),re(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{dashboard_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e},a)];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 413:r("InvalidArgument: the given storage value is too long");case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.setCustomerStorageEntryTo=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:W("VoltCloud customer storage key",e),te("VoltCloud customer storage value",a),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT",(null==_?"{{dashboard_url}}":"{{application_url}}")+"/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e},a)];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 413:r("InvalidArgument: the given storage value is too long");case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.startPasswordResetForCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer email address",e),se(),null==e&&(ie(),e=E),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/forgot",null,{email:e,scope:P})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.updateCustomerRecordBy=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:g("VoltCloud customer settings",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,e)];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?(E=t.email,I===_&&(S=t.email,null!=e.password&&(x=e.password.new))):r("InternalError: could not analyze response for registration request"),[2]}}))}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=voltcloud-for-browsers.js.map
