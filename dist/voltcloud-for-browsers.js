!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.VoltCloud,r=e.VoltCloud={};t(r),r.noConflict=function(){return e.VoltCloud=n,r}}())}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{u(r.next(e))}catch(e){a(e)}}function i(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function r(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function o(e){return"string"==typeof e||e instanceof String}var a=/^\s*$/;function s(e){return("string"==typeof e||e instanceof String)&&!a.test(e.valueOf())}function i(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}function u(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}var c=Array.isArray,l=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function d(e){return i(e,l)}var p=/^[^\s\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function f(e){if(!i(e,p)||""===e)return!1;try{return new URL(e,"file://"),!0}catch(e){return!1}}var v=!1,h=!0;function g(e,t,n){var o=function(o,a){return function(e,t,n,o,a){if(null==t){if(o)return t;r("MissingArgument: no "+C(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else r("InvalidArgument: the given "+C(e)+" is no valid "+C(a))}(o,a,e,t,n)},a=e.name;return null!=a&&/^ValueIs/.test(a)?function(e,t){null==e&&r("MissingArgument: no function given");"function"!=typeof e&&r("InvalidArgument: the given 1st Argument is not a JavaScript function");null==t&&r("MissingArgument: no desired name given");"string"==typeof t||t instanceof String||r("InvalidArgument: the given desired name is not a string");if(e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}(o,a.replace(/^ValueIs/,t?"allow":"expect")):o}var m=g(s,v,"non-empty literal string"),w=g(u,v,'"plain" JavaScript object'),y=g(d,v,"valid EMail address"),b=g(f,v,"valid URL");function C(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function x(e,t){return void 0===t&&(t='"'),t+function(e,t){return void 0===t&&(t='"'),e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}(e,t)+t}var T,S,A,_,k,P,V,I,E,z,q=/^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$/,O=1048574;function H(e){return o(e)&&e.length>=8&&/[0-9]/.test(e)&&e.toLowerCase()!==e}var N=g(H,h,"valid VoltCloud password"),R=N,U=g(H,v,"valid VoltCloud password"),F=U;function L(e){return o(e)&&e.length>=1&&e.length<=63&&q.test(e)}var M=g(L,h,"valid VoltCloud application name"),$=M,j=g(L,v,"valid VoltCloud application name"),Z=j;function B(e){return s(e)&&e.length<=255}var K=g(B,h,"suitable VoltCloud storage key"),G=K,D=g(B,v,"suitable VoltCloud storage key"),J=D;function W(e){return s(e)&&e.length<=O}var X=g(W,h,"suitable VoltCloud storage value"),Y=X,Q=g(W,v,"suitable VoltCloud storage value"),ee=Q;function te(){null==_&&r("InvalidState: please mandate a specific VoltCloud customer first")}function ne(){null==T&&null==_&&r("InvalidState: please mandate a specific VoltCloud developer or customer first")}function re(){null==E&&r("InvalidState: please focus on a specific VoltCloud application first")}function oe(){null==z&&r("InvalidState: please focus on a specific VoltCloud application customer first")}function ae(e,a,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:T=void 0,S=void 0,A=void 0,_=void 0,k=void 0,P=void 0,V=void 0,z=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),S=e,A=a,[4,ie("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:a,scope:"RpYCMN"},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: developer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&o(t.access_token)&&o(t.user_id)?(T=t.user_id,V=t.access_token):(S=void 0,A=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function se(e,a,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:_=void 0,k=void 0,P=void 0,T=void 0,S=void 0,A=void 0,V=void 0,z=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),k=e,P=a,[4,ie("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:a,scope:I},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: customer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&o(t.access_token)&&o(t.user_id)?(_=t.user_id,V=t.access_token,z=t.user_id):(k=void 0,P=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function ie(e,o,a,i,u,c){return void 0===c&&(c=!0),t(this,void 0,void 0,(function(){var l,d;return n(this,(function(p){var f;return l=Object.assign({},{application_id:I,application_url:E,customer_id:z},i||{}),f=l,d=a.replace(ue,(function(e,t){if(f.hasOwnProperty(t))return f[t];r("VariableNotFound: the given placeholder text refers to an undefined variable called "+x(t))})),"GET"===o&&(d+=(d.indexOf("?")<0?"?":"&")+"_="+Date.now()),[2,new Promise((function(r,l){var p=new XMLHttpRequest;function f(){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){if(401===p.status)return c?[2,(null!=S?ae(S,A,!1):se(k,P,!1)).then((function(){ie(e,o,a,i,u,!1).then((function(e){return r(e)})).catch((function(e){return l(e)}))})).catch((function(e){return l(e)}))]:[2,l(ce("AuthorizationFailure: VoltCloud request could not be authorized"))];if((p.getResponseHeader("content-type")||"").startsWith("application/json"))try{if(s((t=JSON.parse(p.responseText)).type)&&s(t.message))return 422===p.status&&"ValidationError"===t.type&&null!=t.validations?[2,l(le(t))]:[2,l(ce(t.type+": "+t.message,{HTTPStatus:p.status,HTTPResponse:p.responseText}))]}catch(e){}return[2,l(ce("RequestFailed: VoltCloud request failed",{HTTPStatus:p.status,HTTPResponse:p.responseText}))]}))}))}if(p.open(o,d,!0),"private"===e&&(p.withCredentials=!0,p.setRequestHeader("authorization","Bearer "+V)),p.timeout=3e4,p.addEventListener("timeout",(function(){l(ce("RequestTimedout: VoltCloud request timed out"))})),p.addEventListener("abort",(function(){l(ce("RequestAborted: VoltCloud request has been aborted"))})),p.addEventListener("error",f),p.addEventListener("load",(function(){p.status<200||p.status>=300?f():function(){t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){if(e=p.status,t=p.getResponseHeader("content-type")||"",204===e)return[2,r(void 0)];switch(!0){case t.startsWith("application/json"):return[2,r(JSON.parse(p.responseText))];case 201===e:return[2,r(void 0)];default:return[2,l(ce("RequestFailed: unexpected response content type "+x(t||"(missing)"),{ContentType:t,HTTPResponse:p.responseText}))]}}))}))}()})),null==u)p.send(null);else if(u instanceof Blob){var v=new FormData;v.append("index.zip",u),p.send(v)}else p.setRequestHeader("Content-Type","application/json"),p.send(JSON.stringify(u))}))]}))}))}var ue=/\{\{([a-z0-9_-]+)\}\}/gi;function ce(e,t){var n,r=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);return null==r?n=new Error(e):(n=new Error(r[2])).name=r[1],null!=t&&Object.assign(n,t),n}function le(e){function t(e){return ce(e,{HTTPStatus:422})}if(c(e.validations.body)&&null!=e.validations.body[0]){var n=e.validations.body[0].messages[0];switch(!0){case n.contains("email"):switch(e.validations.body[0].property){case"request.body.username":case"request.body.email":return t("InvalidArgument: invalid EMail address given")}break;case n.contains("^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: invalid application name given")}break;case n.contains("does not meet minimum length of 1"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("MissingArgument: no application name given");case"request.body.confirmation_url":return t("MissingArgument: no Customer Confirmation URL given");case"request.body.reset_url":return t("MissingArgument: no Password Reset URL given")}break;case n.contains("does not meet maximum length of 63"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: the given application name is too long");case"request.body.confirmation_url":return t("InvalidArgument: the given Customer Confirmation URL is too long");case"request.body.reset_url":return t("InvalidArgument: the given Password Reset URL is too long")}break;case n.contains("additionalProperty"):return t("InvalidArgument: unsupported property given");case n.contains('does not match pattern "[a-zA-Z0-9]{6,}"'):return t("InvalidArgument: invalid Application Id given")}}return c(e.validations.password)&&null!=e.validations.password[0]?t("InvalidArgument: "+e.validations.password[0]):ce("InternalError: "+e.message,e)}e.ApplicationIdPattern=/^[a-zA-Z0-9]{6,}$/,e.ApplicationNamePattern=q,e.ApplicationStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","GET","{{application_url}}/api/storage/{{application_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.ApplicationStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:D("VoltCloud application storage key",e),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","GET","{{application_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((o=n.sent()).HTTPStatus){case 404:switch(o.message){case"Could not route your request.":r("NoSuchApplication: could not find the given application or storage key");case"App not found.":r("NoSuchApplication: could not find the given application");case"Key does not exist.":return[2,void 0]}break;case 422:switch(o.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw o}return[3,4];case 4:return[2,t]}}))}))},e.CustomerRecord=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:re(),te(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","GET","{{application_url}}/api/user/{{customer_id}}",{customer_id:_})];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw t}return[3,4];case 4:return null!=e&&e.id===_?(z===_&&(k=e.email),[2,e]):(r("InternalError: could not analyze response for registration request"),[2])}}))}))},e.CustomerStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:ne(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","GET","{{application_url}}/api/storage/{{customer_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.CustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:D("VoltCloud customer storage key",e),ne(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","GET","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((o=n.sent()).HTTPStatus){case 404:switch(o.message){case"Could not route your request.":r("NoSuchCustomer: could not find the given customer or storage key");case"User not found.":r("NoSuchCustomer: could not find the given customer");case"Key does not exist.":return[2,void 0]}break;case 422:switch(o.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw o}return[3,4];case 4:return[2,t]}}))}))},e.ValueIsApplicationName=L,e.ValueIsPassword=H,e.ValueIsStorageKey=B,e.ValueIsStorageValue=W,e.actOnBehalfOfCustomer=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return y("VoltCloud customer email address",e),U("VoltCloud customer password",r),re(),[4,se(e,r)];case 1:return t.sent(),[2]}}))}))},e.actOnBehalfOfDeveloper=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return y("VoltCloud developer email address",e),U("VoltCloud developer password",r),re(),[4,ae(e,r)];case 1:return t.sent(),[2]}}))}))},e.allowApplicationName=M,e.allowPassword=N,e.allowStorageKey=K,e.allowStorageValue=X,e.allowedApplicationName=$,e.allowedPassword=R,e.allowedStorageKey=G,e.allowedStorageValue=Y,e.changeCustomerEMailAddressTo=function(e){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:y("VoltCloud customer email address",e),te(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{email:e})];case 2:return t=n.sent(),[3,4];case 3:switch((o=n.sent()).HTTPStatus){case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(o.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw o}return[3,4];case 4:return null!=t&&t.id===z?z===_&&(k=t.email):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.changeCustomerPasswordTo=function(e){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:U("VoltCloud customer password",e),te(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{password:{old:P,new:e,confirmation:e}})];case 2:return t=n.sent(),[3,4];case 3:switch((o=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 422:switch(o.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw o}return[3,4];case 4:return null!=t&&t.id===z?z===_&&(P=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.clearCustomerStorage=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:ne(),re(),oe(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ie("private","DELETE","{{application_url}}/api/storage/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.confirmCustomerUsing=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer confirmation token",e),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("public","POST","{{application_url}}/api/auth/confirm",null,{token:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.deleteCustomer=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:ne(),re(),oe(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ie("private","DELETE","{{application_url}}/api/user/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"User not found.":return[2]}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid user id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.deleteCustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:D("VoltCloud customer storage key",e),ne(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","DELETE","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.expectApplicationName=j,e.expectPassword=U,e.expectStorageKey=D,e.expectStorageValue=Q,e.expectedApplicationName=Z,e.expectedPassword=F,e.expectedStorageKey=J,e.expectedStorageValue=ee,e.focusOnApplication=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){return b("VoltCloud application url",e),m("VoltCloud application id",r),E=e,I=r,[2]}))}))},e.focusOnCustomer=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return m("VoltCloud customer id",e),null==T&&r("InvalidState: please mandate a specific VoltCloud developer first"),re(),z=e,[2]}))}))},e.focusOnNewCustomer=function(e,a){return t(this,void 0,void 0,(function(){var t,s;return n(this,(function(n){switch(n.label){case 0:y("VoltCloud customer email address",e),U("VoltCloud customer password",a),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("public","POST","{{application_url}}/api/auth/register",null,{email:e,password:a,confirmation:a,scope:I})];case 2:return t=n.sent(),[3,4];case 3:switch((s=n.sent()).HTTPStatus){case 404:switch(s.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(s.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw s}return[3,4];case 4:return null!=t&&o(t.id)?z=t.id:r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.maxApplicationNameLength=63,e.maxEMailAddressLength=255,e.maxNamePartLength=255,e.maxStorageKeyLength=255,e.maxStorageValueLength=O,e.resendConfirmationEMailToCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:y("VoltCloud customer email address",e),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("public","POST","{{application_url}}/api/auth/resend",null,{email:e,scope:I})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.resetCustomerPasswordUsing=function(e,o){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud password reset token",e),U("VoltCloud customer password",o),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("public","POST","{{application_url}}/api/auth/reset",null,{token:e,password:o,confirmation:o})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.setCustomerStorageEntryTo=function(e,o){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:D("VoltCloud customer storage key",e),Q("VoltCloud customer storage value",o),ne(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","PUT","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e},o)];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 413:r("InvalidArgument: the given storage value is too long");case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.startPasswordResetForCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:y("VoltCloud customer email address",e),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("public","POST","{{application_url}}/api/auth/forgot",null,{email:e,scope:I})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.updateCustomerRecordBy=function(e){return t(this,void 0,void 0,(function(){var t,o;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer settings",e),te(),re(),oe(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ie("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,e)];case 2:return t=n.sent(),[3,4];case 3:switch((o=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(o.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw o}return[3,4];case 4:return null!=t&&t.id===z?z===_&&(k=t.email,null!=e.password&&(P=e.password.new)):r("InternalError: could not analyze response for registration request"),[2]}}))}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=voltcloud-for-browsers.js.map
