!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.VoltCloud,r=e.VoltCloud={};t(r),r.noConflict=function(){return e.VoltCloud=n,r}}())}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function r(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function a(e){return"string"==typeof e||e instanceof String}var o=/^\s*$/;function s(e){return("string"==typeof e||e instanceof String)&&!o.test(e.valueOf())}function i(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}var u=Array.isArray,c=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function l(e){return function(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}(e,c)}var d=!1,p=!0;function f(e,t,n){var a=function(a,o){return function(e,t,n,a,o){if(null==t){if(a)return t;r("MissingArgument: no "+y(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else r("InvalidArgument: the given "+y(e)+" is no valid "+y(o))}(a,o,e,t,n)},o=e.name;return null!=o&&/^ValueIs/.test(o)?function(e,t){null==e&&r("MissingArgument: no function given");"function"!=typeof e&&r("InvalidArgument: the given 1st Argument is not a JavaScript function");null==t&&r("MissingArgument: no desired name given");"string"==typeof t||t instanceof String||r("InvalidArgument: the given desired name is not a string");if(e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}(a,o.replace(/^ValueIs/,t?"allow":"expect")):a}var v=f(s,p,"non-empty literal string"),h=f(s,d,"non-empty literal string"),g=f(i,d,'"plain" JavaScript object'),m=f(l,p,"valid EMail address"),w=f(l,d,"valid EMail address");function y(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function b(e,t){return void 0===t&&(t='"'),t+function(e,t){return void 0===t&&(t='"'),e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}(e,t)+t}var C,T,x,S,A,_,k,P,V,I,E,z=/^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$/,q=1048574;function O(e){return a(e)&&e.length>=8&&/[0-9]/.test(e)&&e.toLowerCase()!==e}var H=f(O,p,"valid VoltCloud password"),N=H,R=f(O,d,"valid VoltCloud password"),U=R;function L(e){return a(e)&&e.length>=1&&e.length<=63&&z.test(e)}var M=f(L,p,"valid VoltCloud application name"),F=M,j=f(L,d,"valid VoltCloud application name"),Z=j;function $(e){return s(e)&&e.length<=255}var B=f($,p,"suitable VoltCloud storage key"),K=B,G=f($,d,"suitable VoltCloud storage key"),D=G;function J(e){return s(e)&&e.length<=q}var W=f(J,p,"suitable VoltCloud storage value"),X=W,Q=f(J,d,"suitable VoltCloud storage value"),Y=Q;function ee(){null==S&&r("InvalidState: please mandate a specific VoltCloud customer first")}function te(){null==C&&null==S&&r("InvalidState: please mandate a specific VoltCloud developer or customer first")}function ne(){null==V&&r("InvalidState: please focus on a specific VoltCloud application first")}function re(){null==E&&r("InvalidState: please focus on a specific VoltCloud application customer first")}function ae(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:C=void 0,T=void 0,x=void 0,S=void 0,A=void 0,_=void 0,k=void 0,I=void 0,E=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),T=e,x=o,[4,se("public","POST","{{dashboard_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:P},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: developer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(C=t.user_id,k=t.access_token):(T=void 0,x=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function oe(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:S=void 0,A=void 0,_=void 0,C=void 0,T=void 0,x=void 0,k=void 0,I=void 0,E=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),A=e,_=o,[4,se("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:P},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: customer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(S=t.user_id,k=t.access_token,I=t.user_id,E=e):(A=void 0,_=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function se(e,a,o,i,c,l){return void 0===l&&(l=!0),t(this,void 0,void 0,(function(){var t,d;return n(this,(function(n){var p;return t=Object.assign({},{application_id:P,application_url:V,customer_id:I},i||{}),p=t,d=o.replace(ie,(function(e,t){if(p.hasOwnProperty(t))return p[t];r("VariableNotFound: the given placeholder text refers to an undefined variable called "+b(t))})),"GET"===a&&(d+=(d.indexOf("?")<0?"?":"&")+"_="+Date.now()),[2,new Promise((function(t,n){var r=new XMLHttpRequest;if(r.open(a,d,!0),"private"===e&&(r.withCredentials=!0,r.setRequestHeader("authorization","Bearer "+k)),r.timeout=3e4,r.addEventListener("timeout",(function(){n(ue("RequestTimedout: VoltCloud request timed out"))})),r.addEventListener("abort",(function(){n(ue("RequestAborted: VoltCloud request has been aborted"))})),r.addEventListener("error",(function(){if(401===r.status)return l?(null!=T?ae(T,x,!1):oe(A,_,!1)).then((function(){se(e,a,o,i,c,!1).then((function(e){return t(e)})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)})):n(ue("AuthorizationFailure: VoltCloud request could not be authorized"));if((r.getResponseHeader("content-type")||"").startsWith("application/json"))try{var d=JSON.parse(r.responseText);if(s(d.type)&&s(d.message))return 422===r.status&&"ValidationError"===d.type&&null!=d.validations?n(function(e){function t(e){return ue(e,{HTTPStatus:422})}if(u(e.validations.body)&&null!=e.validations.body[0]){var n=e.validations.body[0].messages[0];switch(!0){case n.contains("email"):switch(e.validations.body[0].property){case"request.body.username":case"request.body.email":return t("InvalidArgument: invalid EMail address given")}break;case n.contains("^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: invalid application name given")}break;case n.contains("does not meet minimum length of 1"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("MissingArgument: no application name given");case"request.body.confirmation_url":return t("MissingArgument: no Customer Confirmation URL given");case"request.body.reset_url":return t("MissingArgument: no Password Reset URL given")}break;case n.contains("does not meet maximum length of 63"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: the given application name is too long");case"request.body.confirmation_url":return t("InvalidArgument: the given Customer Confirmation URL is too long");case"request.body.reset_url":return t("InvalidArgument: the given Password Reset URL is too long")}break;case n.contains("additionalProperty"):return t("InvalidArgument: unsupported property given");case n.contains('does not match pattern "[a-zA-Z0-9]{6,}"'):return t("InvalidArgument: invalid Application Id given")}}if(u(e.validations.password)&&null!=e.validations.password[0])return t("InvalidArgument: "+e.validations.password[0]);return ue("InternalError: "+e.message,e)}(d)):n(ue(d.type+": "+d.message,{HTTPStatus:r.status,HTTPResponse:r.responseText}))}catch(e){}return n(ue("RequestFailed: VoltCloud request failed",{HTTPStatus:r.status,HTTPResponse:r.responseText}))})),r.addEventListener("load",(function(){var e=r.status,a=r.getResponseHeader("content-type")||"";if(204===e)return t(void 0);switch(!0){case a.startsWith("application/json"):return t(JSON.parse(r.responseText));case 201===e:return t(void 0);default:return n(ue("RequestFailed: unexpected response content type "+b(a||"(missing)"),{ContentType:a,HTTPResponse:r.responseText}))}})),null==c)r.send(null);else if(c instanceof Blob){var p=new FormData;p.append("index.zip",c),r.send(p)}else r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(c))}))]}))}))}var ie=/\{\{([a-z0-9_-]+)\}\}/gi;function ue(e,t){var n,r=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);return null==r?n=new Error(e):(n=new Error(r[2])).name=r[1],null!=t&&Object.assign(n,t),n}e.ApplicationIdPattern=/^[a-zA-Z0-9]{6,}$/,e.ApplicationNamePattern=z,e.ApplicationStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:te(),ne(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","GET","{{application_url}}/api/storage/{{application_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.ApplicationStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:G("VoltCloud application storage key",e),te(),ne(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","GET","{{application_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchApplication: could not find the given application or storage key");case"App not found.":r("NoSuchApplication: could not find the given application");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.CustomerRecord=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:v("VoltCloud customer id",e),ne(),ee(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","GET","{{application_url}}/api/user/{{customer_id}}",{customer_id:S})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===e?(E=t.email,I===S&&(A=t.email),[2,t]):(r("InternalError: could not analyze response for registration request"),[2])}}))}))},e.CustomerStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:te(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","GET","{{application_url}}/api/storage/{{customer_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.CustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:G("VoltCloud customer storage key",e),te(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","GET","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchCustomer: could not find the given customer or storage key");case"User not found.":r("NoSuchCustomer: could not find the given customer");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.ValueIsApplicationName=L,e.ValueIsPassword=O,e.ValueIsStorageKey=$,e.ValueIsStorageValue=J,e.actOnBehalfOfCustomer=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return w("VoltCloud customer email address",e),R("VoltCloud customer password",r),ne(),[4,oe(e,r)];case 1:return t.sent(),[2]}}))}))},e.actOnBehalfOfDeveloper=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return w("VoltCloud developer email address",e),R("VoltCloud developer password",r),ne(),[4,ae(e,r)];case 1:return t.sent(),[2]}}))}))},e.allowApplicationName=M,e.allowPassword=H,e.allowStorageKey=B,e.allowStorageValue=W,e.allowedApplicationName=F,e.allowedPassword=N,e.allowedStorageKey=K,e.allowedStorageValue=X,e.changeCustomerEMailAddressTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer email address",e),ee(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{email:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?(E=t.email,I===S&&(A=t.email)):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.changeCustomerPasswordTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:R("VoltCloud customer password",e),ee(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{password:{old:_,new:e,confirmation:e}})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?I===S&&(_=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.clearCustomerStorage=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:te(),ne(),re(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,se("private","DELETE","{{application_url}}/api/storage/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.confirmCustomerUsing=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:h("VoltCloud customer confirmation token",e),ne(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("public","POST","{{application_url}}/api/auth/confirm",null,{token:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.deleteCustomer=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:te(),ne(),re(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,se("private","DELETE","{{application_url}}/api/user/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"User not found.":return[2]}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid user id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.deleteCustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:G("VoltCloud customer storage key",e),te(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","DELETE","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.expectApplicationName=j,e.expectPassword=R,e.expectStorageKey=G,e.expectStorageValue=Q,e.expectedApplicationName=Z,e.expectedPassword=U,e.expectedStorageKey=D,e.expectedStorageValue=Y,e.focusOnApplication=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return V=e,[2]}))}))},e.focusOnCustomer=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return h("VoltCloud customer id",e),null==C&&r("InvalidState: please mandate a specific VoltCloud developer first"),ne(),I=e,[2]}))}))},e.focusOnNewCustomer=function(e,o){return t(this,void 0,void 0,(function(){var t,s;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer email address",e),R("VoltCloud customer password",o),ne(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("public","POST","{{application_url}}/api/auth/register",null,{email:e,password:o,confirmation:o,scope:P})];case 2:return t=n.sent(),[3,4];case 3:switch((s=n.sent()).HTTPStatus){case 404:switch(s.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(s.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw s}return[3,4];case 4:return null!=t&&a(t.id)?(I=t.id,E=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.maxApplicationNameLength=63,e.maxEMailAddressLength=255,e.maxNamePartLength=255,e.maxStorageKeyLength=255,e.maxStorageValueLength=q,e.resendConfirmationEMailToCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer email address",e),ne(),null==e&&(re(),e=E),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("public","POST","{{application_url}}/api/auth/resend",null,{email:e,scope:P})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.resetCustomerPasswordUsing=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:h("VoltCloud password reset token",e),R("VoltCloud customer password",a),ne(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("public","POST","{{application_url}}/api/auth/reset",null,{token:e,password:a,confirmation:a})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.setCustomerStorageEntryTo=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:G("VoltCloud customer storage key",e),Q("VoltCloud customer storage value",a),te(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","PUT","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e},a)];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 413:r("InvalidArgument: the given storage value is too long");case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.startPasswordResetForCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer email address",e),ne(),null==e&&(re(),e=E),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("public","POST","{{application_url}}/api/auth/forgot",null,{email:e,scope:P})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.updateCustomerRecordBy=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:g("VoltCloud customer settings",e),ee(),ne(),re(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,se("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,e)];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===I?(E=t.email,I===S&&(A=t.email,null!=e.password&&(_=e.password.new))):r("InternalError: could not analyze response for registration request"),[2]}}))}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=voltcloud-for-browsers.js.map
