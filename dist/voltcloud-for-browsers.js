!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.VoltCloud,r=e.VoltCloud={};t(r),r.noConflict=function(){return e.VoltCloud=n,r}}())}(this,(function(e){"use strict";function t(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function r(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function a(e){return"string"==typeof e||e instanceof String}var o=/^\s*$/;function s(e){return("string"==typeof e||e instanceof String)&&!o.test(e.valueOf())}function i(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}function u(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}var c=Array.isArray,l=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function d(e){return i(e,l)}var p=/^[^\s\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function f(e){if(!i(e,p)||""===e)return!1;try{return new URL(e,"file://"),!0}catch(e){return!1}}var v=!1,h=!0;function g(e,t,n){var a=function(a,o){return function(e,t,n,a,o){if(null==t){if(a)return t;r("MissingArgument: no "+T(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else r("InvalidArgument: the given "+T(e)+" is no valid "+T(o))}(a,o,e,t,n)},o=e.name;return null!=o&&/^ValueIs/.test(o)?function(e,t){null==e&&r("MissingArgument: no function given");"function"!=typeof e&&r("InvalidArgument: the given 1st Argument is not a JavaScript function");null==t&&r("MissingArgument: no desired name given");"string"==typeof t||t instanceof String||r("InvalidArgument: the given desired name is not a string");if(e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}(a,o.replace(/^ValueIs/,t?"allow":"expect")):a}var m=g(s,h,"non-empty literal string"),w=g(s,v,"non-empty literal string"),y=g(u,v,'"plain" JavaScript object'),b=g(d,h,"valid EMail address"),C=g(d,v,"valid EMail address"),x=g(f,v,"valid URL");function T(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function S(e,t){return void 0===t&&(t='"'),t+function(e,t){return void 0===t&&(t='"'),e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}(e,t)+t}var A,_,k,V,P,I,E,z,q,O,H,N=/^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$/,R=1048574;function U(e){return a(e)&&e.length>=8&&/[0-9]/.test(e)&&e.toLowerCase()!==e}var F=g(U,h,"valid VoltCloud password"),L=F,M=g(U,v,"valid VoltCloud password"),$=M;function j(e){return a(e)&&e.length>=1&&e.length<=63&&N.test(e)}var Z=g(j,h,"valid VoltCloud application name"),B=Z,K=g(j,v,"valid VoltCloud application name"),G=K;function D(e){return s(e)&&e.length<=255}var J=g(D,h,"suitable VoltCloud storage key"),W=J,X=g(D,v,"suitable VoltCloud storage key"),Q=X;function Y(e){return s(e)&&e.length<=R}var ee=g(Y,h,"suitable VoltCloud storage value"),te=ee,ne=g(Y,v,"suitable VoltCloud storage value"),re=ne;function ae(){null==V&&r("InvalidState: please mandate a specific VoltCloud customer first")}function oe(){null==A&&null==V&&r("InvalidState: please mandate a specific VoltCloud developer or customer first")}function se(){null==q&&r("InvalidState: please focus on a specific VoltCloud application first")}function ie(){null==H&&r("InvalidState: please focus on a specific VoltCloud application customer first")}function ue(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:A=void 0,_=void 0,k=void 0,V=void 0,P=void 0,I=void 0,E=void 0,O=void 0,H=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),_=e,k=o,[4,le("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:z},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: developer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(A=t.user_id,E=t.access_token):(_=void 0,k=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function ce(e,o,s){return void 0===s&&(s=!0),t(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:V=void 0,P=void 0,I=void 0,A=void 0,_=void 0,k=void 0,E=void 0,O=void 0,H=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),P=e,I=o,[4,le("public","POST","{{application_url}}/api/auth/login",null,{grant_type:"password",username:e,password:o,scope:z},s)];case 2:return t=n.sent(),[3,4];case 3:switch((i=n.sent()).HTTPStatus){case 401:r("LoginFailed: customer could not be logged in");default:throw i}return[3,4];case 4:return null!=t&&"bearer"===t.token_type&&a(t.access_token)&&a(t.user_id)?(V=t.user_id,E=t.access_token,O=t.user_id,H=e):(P=void 0,I=void 0,r("InternalError: could not analyze response for login request")),[2]}}))}))}function le(e,a,o,i,u,l){return void 0===l&&(l=!0),t(this,void 0,void 0,(function(){var t,d;return n(this,(function(n){var p;return t=Object.assign({},{application_id:z,application_url:q,customer_id:O},i||{}),p=t,d=o.replace(de,(function(e,t){if(p.hasOwnProperty(t))return p[t];r("VariableNotFound: the given placeholder text refers to an undefined variable called "+S(t))})),"GET"===a&&(d+=(d.indexOf("?")<0?"?":"&")+"_="+Date.now()),[2,new Promise((function(t,n){var r=new XMLHttpRequest;if(r.open(a,d,!0),"private"===e&&(r.withCredentials=!0,r.setRequestHeader("authorization","Bearer "+E)),r.timeout=3e4,r.addEventListener("timeout",(function(){n(pe("RequestTimedout: VoltCloud request timed out"))})),r.addEventListener("abort",(function(){n(pe("RequestAborted: VoltCloud request has been aborted"))})),r.addEventListener("error",(function(){if(401===r.status)return l?(null!=_?ue(_,k,!1):ce(P,I,!1)).then((function(){le(e,a,o,i,u,!1).then((function(e){return t(e)})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)})):n(pe("AuthorizationFailure: VoltCloud request could not be authorized"));if((r.getResponseHeader("content-type")||"").startsWith("application/json"))try{var d=JSON.parse(r.responseText);if(s(d.type)&&s(d.message))return 422===r.status&&"ValidationError"===d.type&&null!=d.validations?n(function(e){function t(e){return pe(e,{HTTPStatus:422})}if(c(e.validations.body)&&null!=e.validations.body[0]){var n=e.validations.body[0].messages[0];switch(!0){case n.contains("email"):switch(e.validations.body[0].property){case"request.body.username":case"request.body.email":return t("InvalidArgument: invalid EMail address given")}break;case n.contains("^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: invalid application name given")}break;case n.contains("does not meet minimum length of 1"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("MissingArgument: no application name given");case"request.body.confirmation_url":return t("MissingArgument: no Customer Confirmation URL given");case"request.body.reset_url":return t("MissingArgument: no Password Reset URL given")}break;case n.contains("does not meet maximum length of 63"):switch(e.validations.body[0].property){case"request.body.subdomain":return t("InvalidArgument: the given application name is too long");case"request.body.confirmation_url":return t("InvalidArgument: the given Customer Confirmation URL is too long");case"request.body.reset_url":return t("InvalidArgument: the given Password Reset URL is too long")}break;case n.contains("additionalProperty"):return t("InvalidArgument: unsupported property given");case n.contains('does not match pattern "[a-zA-Z0-9]{6,}"'):return t("InvalidArgument: invalid Application Id given")}}if(c(e.validations.password)&&null!=e.validations.password[0])return t("InvalidArgument: "+e.validations.password[0]);return pe("InternalError: "+e.message,e)}(d)):n(pe(d.type+": "+d.message,{HTTPStatus:r.status,HTTPResponse:r.responseText}))}catch(e){}return n(pe("RequestFailed: VoltCloud request failed",{HTTPStatus:r.status,HTTPResponse:r.responseText}))})),r.addEventListener("load",(function(){var e=r.status,a=r.getResponseHeader("content-type")||"";if(204===e)return t(void 0);switch(!0){case a.startsWith("application/json"):return t(JSON.parse(r.responseText));case 201===e:return t(void 0);default:return n(pe("RequestFailed: unexpected response content type "+S(a||"(missing)"),{ContentType:a,HTTPResponse:r.responseText}))}})),null==u)r.send(null);else if(u instanceof Blob){var p=new FormData;p.append("index.zip",u),r.send(p)}else r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(u))}))]}))}))}var de=/\{\{([a-z0-9_-]+)\}\}/gi;function pe(e,t){var n,r=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);return null==r?n=new Error(e):(n=new Error(r[2])).name=r[1],null!=t&&Object.assign(n,t),n}e.ApplicationIdPattern=/^[a-zA-Z0-9]{6,}$/,e.ApplicationNamePattern=N,e.ApplicationStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:oe(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{application_url}}/api/storage/{{application_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.ApplicationStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:X("VoltCloud application storage key",e),oe(),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{application_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}",{application_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchApplication: could not find the given application or storage key");case"App not found.":r("NoSuchApplication: could not find the given application");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.CustomerRecord=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:m("VoltCloud customer id",e),se(),ae(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{application_url}}/api/user/{{customer_id}}",{customer_id:V})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===e?(H=t.email,O===V&&(P=t.email),[2,t]):(r("InternalError: could not analyze response for registration request"),[2])}}))}))},e.CustomerStorage=function(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{application_url}}/api/storage/{{customer_id}}")];case 2:return e=n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw t}return[3,4];case 4:return[2,e||{}]}}))}))},e.CustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:X("VoltCloud customer storage key",e),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","GET","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:switch(a.message){case"Could not route your request.":r("NoSuchCustomer: could not find the given customer or storage key");case"User not found.":r("NoSuchCustomer: could not find the given customer");case"Key does not exist.":return[2,void 0]}break;case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw a}return[3,4];case 4:return[2,t]}}))}))},e.ValueIsApplicationName=j,e.ValueIsPassword=U,e.ValueIsStorageKey=D,e.ValueIsStorageValue=Y,e.actOnBehalfOfCustomer=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return C("VoltCloud customer email address",e),M("VoltCloud customer password",r),se(),[4,ce(e,r)];case 1:return t.sent(),[2]}}))}))},e.actOnBehalfOfDeveloper=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return C("VoltCloud developer email address",e),M("VoltCloud developer password",r),se(),[4,ue(e,r)];case 1:return t.sent(),[2]}}))}))},e.allowApplicationName=Z,e.allowPassword=F,e.allowStorageKey=J,e.allowStorageValue=ee,e.allowedApplicationName=B,e.allowedPassword=L,e.allowedStorageKey=W,e.allowedStorageValue=te,e.changeCustomerEMailAddressTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:C("VoltCloud customer email address",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{email:e})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===O?(H=t.email,O===V&&(P=t.email)):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.changeCustomerPasswordTo=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:M("VoltCloud customer password",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,{password:{old:I,new:e,confirmation:e}})];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===O?O===V&&(I=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.clearCustomerStorage=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:oe(),se(),ie(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,le("private","DELETE","{{application_url}}/api/storage/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.confirmCustomerUsing=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud customer confirmation token",e),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/confirm",null,{token:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.deleteCustomer=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:oe(),se(),ie(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,le("private","DELETE","{{application_url}}/api/user/{{customer_id}}")];case 2:return t.sent(),[3,4];case 3:switch((e=t.sent()).HTTPStatus){case 404:switch(e.message){case"User not found.":return[2]}break;case 422:switch(e.message){case"Could not decode scope.":r("InvalidArgument: invalid user id given")}default:throw e}return[3,4];case 4:return[2]}}))}))},e.deleteCustomerStorageEntry=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:X("VoltCloud customer storage key",e),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","DELETE","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.expectApplicationName=K,e.expectPassword=M,e.expectStorageKey=X,e.expectStorageValue=ne,e.expectedApplicationName=G,e.expectedPassword=$,e.expectedStorageKey=Q,e.expectedStorageValue=re,e.focusOnApplication=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){return x("VoltCloud application url",e),w("VoltCloud application id",r),q=e,z=r,[2]}))}))},e.focusOnCustomer=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){return w("VoltCloud customer id",e),null==A&&r("InvalidState: please mandate a specific VoltCloud developer first"),se(),O=e,[2]}))}))},e.focusOnNewCustomer=function(e,o){return t(this,void 0,void 0,(function(){var t,s;return n(this,(function(n){switch(n.label){case 0:C("VoltCloud customer email address",e),M("VoltCloud customer password",o),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/register",null,{email:e,password:o,confirmation:o,scope:z})];case 2:return t=n.sent(),[3,4];case 3:switch((s=n.sent()).HTTPStatus){case 404:switch(s.message){case"Could not route your request.":case"App not found.":r("NoSuchApplication: could not find the given application")}break;case 422:switch(s.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw s}return[3,4];case 4:return null!=t&&a(t.id)?(O=t.id,H=e):r("InternalError: could not analyze response for registration request"),[2]}}))}))},e.maxApplicationNameLength=63,e.maxEMailAddressLength=255,e.maxNamePartLength=255,e.maxStorageKeyLength=255,e.maxStorageValueLength=R,e.resendConfirmationEMailToCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:b("VoltCloud customer email address",e),se(),null==e&&(ie(),e=H),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/resend",null,{email:e,scope:z})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.resetCustomerPasswordUsing=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:w("VoltCloud password reset token",e),M("VoltCloud customer password",a),se(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/reset",null,{token:e,password:a,confirmation:a})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 401:r("BadToken: the given token can not be recognized");default:throw t}return[3,4];case 4:return[2]}}))}))},e.setCustomerStorageEntryTo=function(e,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:X("VoltCloud customer storage key",e),ne("VoltCloud customer storage value",a),oe(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}",{customer_storage_key:e},a)];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 404:switch(t.message){case"Could not route your request.":case"User not found.":r("NoSuchCustomer: could not find the given customer")}break;case 413:r("InvalidArgument: the given storage value is too long");case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given");case"The length of the key parameter must be <=255.":r("InvalidArgument: the given storage key is too long")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.startPasswordResetForCustomer=function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:b("VoltCloud customer email address",e),se(),null==e&&(ie(),e=H),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("public","POST","{{application_url}}/api/auth/forgot",null,{email:e,scope:z})];case 2:return n.sent(),[3,4];case 3:switch((t=n.sent()).HTTPStatus){case 422:switch(t.message){case"Could not decode scope.":r("InvalidArgument: invalid application id given")}default:throw t}return[3,4];case 4:return[2]}}))}))},e.updateCustomerRecordBy=function(e){return t(this,void 0,void 0,(function(){var t,a;return n(this,(function(n){switch(n.label){case 0:y("VoltCloud customer settings",e),ae(),se(),ie(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,le("private","PUT","{{application_url}}/api/user/{{customer_id}}",null,e)];case 2:return t=n.sent(),[3,4];case 3:switch((a=n.sent()).HTTPStatus){case 403:r("ForbiddenOperation: wrong current password given");case 404:r("NoSuchUser: the given customer does not exist");case 409:r("UserExists: the given EMail address is already in use");case 422:switch(a.message){case"Could not decode scope.":r("InvalidArgument: invalid customer id given")}default:throw a}return[3,4];case 4:return null!=t&&t.id===O?(H=t.email,O===V&&(P=t.email,null!=e.password&&(I=e.password.new))):r("InternalError: could not analyze response for registration request"),[2]}}))}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=voltcloud-for-browsers.js.map
